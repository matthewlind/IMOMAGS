/*
 * Buffet - A basic jQuery carousel scroller
 
 * Copyright (c) 2011 Kyle Truscott
 *
 * http://keighl.github.com/buffet
 *
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 */
(function(a){"use strict";var b={move:function(b){return a(this).each(function(){var c=a(this),d=a(this).data("buffet");if(!d)return!1;if(!d.is_moving){d.is_moving=!0;var e=parseInt(a(this).position().left,10),f=b==="next"?e-d.move_by:e+d.move_by;f<=d.scroll_max?(f=d.scroll_max,a(d.next).size()&&a(d.next).addClass("inactive"),a(d.prev).size()&&a(d.prev).removeClass("inactive")):f>=0?(f=0,a(d.next).size()&&a(d.next).removeClass("inactive"),a(d.prev).size()&&a(d.prev).addClass("inactive")):(a(d.next).size()&&a(d.next).removeClass("inactive"),a(d.prev).size()&&a(d.prev).removeClass("inactive")),e!==f?(typeof d.before=="function"&&d.before.call(this),a(this).stop().animate({left:f},d.speed,d.easing,function(){typeof d.after=="function"&&d.after.call(this),d.is_moving=!1})):d.is_moving=!1}})},next:function(){return a(this).each(function(){b.move.call(a(this),"next")})},prev:function(){return a(this).each(function(){b.move.call(a(this),"prev")})},init:function(c){return a(this).each(function(){var d={scroll_by:3,easing:"linear",speed:400,next:null,prev:null,before:function(){},after:function(){},wrapper:a(this).parent(),children:a(this).children(),trim:a(this).children().size()?parseInt(a(this).children().first().css("margin-right"),10):0};c&&a.extend(d,c);var e=a(this),f=a(this).data("buffet");if(!f){d.is_moving=!1,d.index=0;if(!a(d.children).size())return!1;d.child_width=parseInt(a(this).children().eq(0).outerWidth(!0),10),d.move_by=d.child_width*d.scroll_by,d.scroll_width=0,d.scroll_max=0,d.wrapper_width=d.wrapper.innerWidth(),d.scroll_width=d.child_width*a(d.children).size()-d.trim,d.scroll_max=d.scroll_width-d.wrapper_width,d.scroll_max=d.scroll_max<=0?0:d.scroll_max*-1;if(d.scroll_max===0)return!1;e.css({position:"absolute",top:0,left:0}),a(d.next).size()&&a(d.next).bind("click.buffet",function(){return b.move.call(e,"next"),!1}),a(d.prev).size()&&a(d.prev).bind("click.buffet",function(){return b.move.call(e,"prev"),!1}).addClass("inactive"),a(e).data("buffet",d)}})},destroy:function(){return this.each(function(){var b=a(this).data("buffet");if(!b)return!1;a(b.next).size()&&a(b.next).unbind("click.buffet"),a(b.prev).size()&&a(b.prev).unbind("click.buffet"),a(this).data("buffet",null)})}};a.fn.buffet=function(c){if(b[c])return b[c].apply(this,Array.prototype.slice.call(arguments,1));if(typeof c=="object"||!c)return b.init.apply(this,arguments);a.error("Method "+c+" does not exist on buffet!")}})(jQuery)